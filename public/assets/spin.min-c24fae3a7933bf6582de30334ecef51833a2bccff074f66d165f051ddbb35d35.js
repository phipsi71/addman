!function(t,e){"object"==typeof module&&module.exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Spinner=e()}(this,function(){"use strict";function t(t,e){var n,o=document.createElement(t||"div");for(n in e)o[n]=e[n];return o}function e(t){for(var e=1,n=arguments.length;n>e;e++)t.appendChild(arguments[e]);return t}function n(t,e,n,o){var i=["opacity",e,~~(100*t),n,o].join("-"),r=.01+n/o*100,a=Math.max(1-(1-t)/e*(100-r),t),s=c.substring(0,c.indexOf("Animation")).toLowerCase(),l=s&&"-"+s+"-"||"";return p[i]||(u.insertRule("@"+l+"keyframes "+i+"{0%{opacity:"+a+"}"+r+"%{opacity:"+t+"}"+(r+.01)+"%{opacity:1}"+(r+e)%100+"%{opacity:"+t+"}100%{opacity:"+a+"}}",u.cssRules.length),p[i]=1),i}function o(t,e){var n,o,i=t.style;if(e=e.charAt(0).toUpperCase()+e.slice(1),void 0!==i[e])return e;for(o=0;o<d.length;o++)if(n=d[o]+e,void 0!==i[n])return n}function i(t,e){for(var n in e)t.style[o(t,n)||n]=e[n];return t}function r(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)void 0===t[o]&&(t[o]=n[o])}return t}function a(t,e){return"string"==typeof t?t:t[e%t.length]}function s(t){this.opts=r(t||{},s.defaults,f)}function l(){function n(e,n){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}u.addRule(".spin-vml","behavior:url(#default#VML)"),s.prototype.lines=function(t,o){function r(){return i(n("group",{coordsize:u+" "+u,coordorigin:-c+" "+-c}),{width:u,height:u})}function s(t,s,l){e(p,e(i(r(),{rotation:360/o.lines*t+"deg",left:~~s}),e(i(n("roundrect",{arcsize:o.corners}),{width:c,height:o.scale*o.width,left:o.scale*o.radius,top:-o.scale*o.width>>1,filter:l}),n("fill",{color:a(o.color,t),opacity:o.opacity}),n("stroke",{opacity:0}))))}var l,c=o.scale*(o.length+o.width),u=2*o.scale*c,d=-(o.width+o.length)*o.scale*2+"px",p=i(r(),{position:"absolute",top:d,left:d});if(o.shadow)for(l=1;l<=o.lines;l++)s(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=o.lines;l++)s(l);return e(t,p)},s.prototype.opacity=function(t,e,n,o){var i=t.firstChild;o=o.shadow&&o.lines||0,i&&e+o<i.childNodes.length&&(i=i.childNodes[e+o],i=i&&i.firstChild,i=i&&i.firstChild,i&&(i.opacity=n))}}var c,u,d=["webkit","Moz","ms","O"],p={},f={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};if(s.defaults={},r(s.prototype,{spin:function(e){this.stop();var n=this,o=n.opts,r=n.el=t(null,{className:o.className});if(i(r,{position:o.position,width:0,zIndex:o.zIndex,left:o.left,top:o.top}),e&&e.insertBefore(r,e.firstChild||null),r.setAttribute("role","progressbar"),n.lines(r,n.opts),!c){var a,s=0,l=(o.lines-1)*(1-o.direction)/2,u=o.fps,d=u/o.speed,p=(1-o.opacity)/(d*o.trail/100),f=d/o.lines;!function h(){s++;for(var t=0;t<o.lines;t++)a=Math.max(1-(s+(o.lines-t)*f)%d*p,o.opacity),n.opacity(r,t*o.direction+l,a,o);n.timeout=n.el&&setTimeout(h,~~(1e3/u))}()}return n},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(o,r){function s(e,n){return i(t(),{position:"absolute",width:r.scale*(r.length+r.width)+"px",height:r.scale*r.width+"px",background:e,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/r.lines*u+r.rotate)+"deg) translate("+r.scale*r.radius+"px,0)",borderRadius:(r.corners*r.scale*r.width>>1)+"px"})}for(var l,u=0,d=(r.lines-1)*(1-r.direction)/2;u<r.lines;u++)l=i(t(),{position:"absolute",top:1+~(r.scale*r.width/2)+"px",transform:r.hwaccel?"translate3d(0,0,0)":"",opacity:r.opacity,animation:c&&n(r.opacity,r.trail,d+u*r.direction,r.lines)+" "+1/r.speed+"s linear infinite"}),r.shadow&&e(l,i(s("#000","0 0 4px #000"),{top:"2px"})),e(o,e(l,s(a(r.color,u),"0 0 1px rgba(0,0,0,.1)")));return o},opacity:function(t,e,n){e<t.childNodes.length&&(t.childNodes[e].style.opacity=n)}}),"undefined"!=typeof document){u=function(){var n=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}();var h=i(t("group"),{behavior:"url(#default#VML)"});!o(h,"transform")&&h.adj?l():c=o(h,"animation")}return s});