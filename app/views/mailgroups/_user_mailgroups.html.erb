<%- model_class = Mailgroup -%>
<div class="page-header col-lg-12">
  <span class="dim"></span>
  <h2><%= content_tag(:i, nil, class: 'fa fa-users') + " #{@user.mailgroups.count}" %>
          assigned groups</h2>
</div>

<table class="table table-striped fadeactions mailgroups">
  <thead class="grad">
    <tr>
      <td class="dim"><%= model_class.human_attribute_name(:id) %></td>
      <td><%= model_class.human_attribute_name(:name) %></td>
      <td><%= model_class.human_attribute_name(:trialcode) %></td>
      <td># Users</td>
      <td><%=t '.actions', default: t("helpers.actions") %></td>
    </tr>
  </thead>
  <tbody>

    <%= render partial: "mailgroups/mailgroup", collection: @user.mailgroups.order(:name), as: :mailgroup %>

  </tbody>
</table>

<% if current_user %>
  <!-- append  a MAILGROUP to the user -->
  <%= form_tag append_user_mailgroups_path(@user), method: :patch, remote: true do %>
    <div class="input-group append col-lg-6">

      <%= text_field_tag 'autogroups', '', size: 75, class: 'form-control' %>
      <%= hidden_field_tag 'mailgroup_id', 'dummy' %>

      <span class="input-group-btn append">
          <button class="btn btn-default" type="submit">Append</button>
      </span>
    </div>
  <% end %>
<% end %>

<%= content_tag(:div, "partial mailgroups/mailgroup" , class: 'iv col-lg-12') %>
<%= content_tag(:div, "#{__FILE__}" , class: 'iv col-lg-12') %>